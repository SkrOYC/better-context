#!/usr/bin/env node
// @bun

// bin.js
import { spawnSync } from 'child_process';
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';
var PLATFORM_ARCH = `${process.platform}-${process.arch}`;
var TARGET_MAP = {
	'darwin-arm64': 'btca-darwin-arm64',
	'darwin-x64': 'btca-darwin-x64',
	'linux-x64': 'btca-linux-x64',
	'linux-arm64': 'btca-linux-arm64',
	'win32-x64': 'btca-windows-x64.exe'
};
var binaryName = TARGET_MAP[PLATFORM_ARCH];
if (!binaryName) {
	console.error(
		`[btca] Unsupported platform: ${PLATFORM_ARCH}. ` +
			'Please open an issue with your OS/CPU details.'
	);
	process.exit(1);
}
var __dirname2 = path.dirname(fileURLToPath(import.meta.url));
var binPath = path.join(__dirname2, 'dist', binaryName);
if (!fs.existsSync(binPath)) {
	console.error(
		`[btca] Prebuilt binary not found for ${PLATFORM_ARCH}. ` +
			'Try reinstalling, or open an issue if the problem persists.'
	);
	process.exit(1);
}
var result = spawnSync(binPath, process.argv.slice(2), {
	stdio: 'inherit'
});
if (result.error) {
	console.error(`[btca] Failed to start binary: ${result.error}`);
	process.exit(1);
}
process.exit(result.status ?? 1);
